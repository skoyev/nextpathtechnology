(window.webpackJsonp_bluehost_wordpress_plugin=window.webpackJsonp_bluehost_wordpress_plugin||[]).push([[17],{130:function(e,t,n){},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return E}));var a=n(14),r=n.n(a),c=n(1),o=n(6),l=n(26),i=n(2),s=n(3),u=n.n(s),d=n(5),m=n(129),f=n(10),p=n(11),b=function(e){var t=e.type,n=void 0===t?"base":t,a=e.descriptivePageTitle,s=void 0!==a&&a,b=r()(e,["type","descriptivePageTitle"]),h=document.querySelector(".bwa-route-contents"),y=Object(f.useLocation)(),E=Object(p.useSelect)((function(e){return e("bluehost/plugin").getTopLevelPages()}),[]);if(null==E)return!1;var v=function(){var e=Object(i.__)("Bluehost WordPress Plugin","bluehost-wordpress-plugin"),t=document.querySelector("h2");return!1!==s?s:null!==t?t.innerText:e};return Object(c.useEffect)((function(){var e,t,n,a,r;Object(o.e)(E),Object(o.d)((e=!1,t=y.pathname,(n=Object(d.keyBy)(E,"path"))[t]?e=n[t].slug:E.forEach((function(n){t.includes(n.path)&&(e=n.slug)})),e)),h.focus({preventScroll:!0}),a=y,r=v(),void 0!==a.state&&void 0!==a.state.redirect&&"unspecified-or-root"===a.state.redirect||Object(m.speak)(r,"assertive"),Object(o.h)(y,v())}),[y.pathname]),Object(c.createElement)("section",{className:u()(["component-template-"+n,"base-template","animated","fadeIn","page-fade-speed",b.className?b.className:null])},Object(c.createElement)(l.k,null),b.children)},h=n(12),y=n.n(h),E=(n(130),function(e){var t=e.type,n=void 0===t?"common":t,a=e.children,o=r()(e,["type","children"]);return Object(c.createElement)(b,y()({type:n},o),a)})},173:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(1),r=(n(173),n(10)),c=n(47),o=n.n(c),l=n(4),i=n.n(l),s=n(14),u=n.n(s),d=function(e){var t=e.item,n=e.Components,r=e.methods,c=e.constants,o=function(e){e.data=e.data||{},e.data.page=window.location.href,r.apiFetch({url:"".concat(c.resturl).concat(c.eventendpoint),method:"POST",data:e})},l=function(e){e.keycode&&ENTER!==e.keycode||o({action:"newfold-marketplaceitem-click",data:{element:"button",label:e.target.innerText,productId:t.id}})},i=function(e){e.keycode&&ENTER!==e.keycode||o({action:"newfold-marketplaceitem-click",data:{element:"a",href:e.target.getAttribute("href"),label:e.target.innerText,productId:t.id}})};return r.useEffect((function(){var e=document.getElementById("marketplace-item-".concat(t.id)),n=Array.from(e.querySelectorAll("button")),a=Array.from(e.querySelectorAll("a"));return n.length&&n.forEach((function(e){"close"!==e.getAttribute("data-action")&&(e.addEventListener("click",l),e.addEventListener("onkeydown",l))})),a.length&&a.forEach((function(e){"close"!==e.getAttribute("data-action")&&(e.addEventListener("click",i),e.addEventListener("onkeydown",i))})),function(){n.length&&n.forEach((function(e){"close"!==e.getAttribute("data-action")&&(e.removeEventListener("click",l),e.removeEventListener("onkeydown",l))})),a.length&&a.forEach((function(e){"close"!==e.getAttribute("data-action")&&(e.removeEventListener("click",i),e.removeEventListener("onkeydown",i))}))}}),[]),Object(a.createElement)(n.Card,{className:"marketplace-item marketplace-item-".concat(t.id),id:"marketplace-item-".concat(t.id)},t.productThumbnailUrl&&Object(a.createElement)(n.CardMedia,null,Object(a.createElement)("img",{src:t.productThumbnailUrl,alt:t.name+" thumbnail"})),Object(a.createElement)(n.CardHeader,null,Object(a.createElement)("h3",null,t.name),t.price>0&&t.price_formatted&&Object(a.createElement)("em",{className:"price"},t.price_formatted)),t.description&&Object(a.createElement)(n.CardBody,{dangerouslySetInnerHTML:{__html:t.description}}),Object(a.createElement)(n.CardFooter,null,function(e){var t,r;return c.supportsCTB&&e.clickToBuyId&&e.primaryCallToAction?t=Object(a.createElement)(n.Button,{variant:"primary",className:"primary-cta ctb-cta","data-action":"load-nfd-ctb","data-ctb-id":e.clickToBuyId},e.primaryCallToAction):e.primaryUrl&&e.primaryCallToAction&&(t=Object(a.createElement)(n.Button,{variant:"primary",className:"primary-cta",target:"_blank",href:e.primaryUrl},e.primaryCallToAction)),e.secondaryCallToAction&&e.secondaryUrl&&(r=Object(a.createElement)(n.Button,{variant:"secondary",className:"secondary-cta",target:"_blank",href:e.secondaryUrl},e.secondaryCallToAction)),Object(a.createElement)(a.Fragment,null,t,r)}(t)))},m=function(e){var t=e.marketplaceItems,n=e.currentCount,r=e.category,c=e.Components,o=e.methods,l=e.constants,s=e.saveCategoryDisplayCount,u=o.useState(n),m=i()(u,2),f=m[0],p=m[1],b=o.useState([]),h=i()(b,2),y=h[0],E=h[1],v=o.useState([]),g=i()(v,2),C=g[0],k=g[1];return o.useEffect((function(){E(function(e,t){return e.filter((function(e){return e.categories.includes(t)}))}(t,r))}),[]),o.useEffect((function(){k(function(e,t){var n=0;return e.filter((function(e){return++n<=t}))}(y,f))}),[y,f]),o.useEffect((function(){s(r,f)}),[f]),Object(a.createElement)("div",{className:"marketplaceList"},Object(a.createElement)("div",{className:"grid col2"},C.length>0&&C.map((function(e){return Object(a.createElement)(d,{key:e.hash,item:e,Components:c,methods:o,constants:l})})),!C.length&&Object(a.createElement)("p",null,"Sorry, no marketplace items. Please, try again later.")),y&&y.length>f&&Object(a.createElement)("div",{style:{display:"flex",margin:"1rem 0"}},Object(a.createElement)(c.Button,{onClick:function(){p(f+l.perPage)},variant:"primary",className:"align-center",style:{margin:"auto"}},"Load More")))},f=function(e){var t=e.methods,n=e.constants,r=e.Components,c=(u()(e,["methods","constants","Components"]),t.useState(!0)),l=i()(c,2),s=l[0],d=l[1],f=t.useState(!1),p=i()(f,2),b=p[0],h=p[1],y=t.useState([]),E=i()(y,2),v=E[0],g=E[1],C=t.useState([]),k=i()(C,2),O=k[0],j=k[1],w=t.useState(),T=i()(w,2),S=T[0];T[1],t.useEffect((function(){t.apiFetch({url:"".concat(n.resturl,"/newfold-marketplace/v1/marketplace")}).then((function(e){if(d(!1),e.hasOwnProperty("data")){var t=e.data;j(t),g(L(t))}else h(!0)}))}),[]),t.useEffect((function(){s||(O.length<1?h(!0):h(!1))}),[O]);var L=function(e){if(!e.length)return[];var t=[],a=new Set;return e.forEach((function(e){e.categories.forEach((function(e){a.add(e)}))})),a.forEach((function(e){t.push({name:e,title:e,currentCount:n.perPage})})),t.sort((function(e,t){return"featured"===e.name.toLowerCase()?-1:"featured"===t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})),t},N=function(e,t){var n=o()(v);n.forEach((function(n){n.name===e&&(n.currentCount=t)})),g(n)};return Object(a.createElement)("div",{className:t.classnames("newfold-marketplace-wrapper")},s&&Object(a.createElement)(r.Spinner,null),b&&Object(a.createElement)("h3",null,"Oops, there was an error loading the marketplace, please try again later."),!s&&!b&&Object(a.createElement)(r.TabPanel,{className:"newfold-marketplace-tabs",activeClass:"current-tab",orientation:"vertical",initialTabName:S,tabs:v},(function(e){return Object(a.createElement)(m,{marketplaceItems:O,category:e.name,Components:r,methods:t,constants:n,currentCount:e.currentCount,saveCategoryDisplayCount:N})})))},p=n(16),b=n.n(p),h=n(3),y=n.n(h),E=n(0),v=n(13),g=n(131);t.default=Object(r.withRouter)((function(e){e.history;var t={Button:v.Button,Card:v.Card,CardBody:v.CardBody,CardFooter:v.CardFooter,CardHeader:v.CardHeader,CardMedia:v.CardMedia,TabPanel:v.TabPanel,Spinner:v.Spinner},n={apiFetch:b.a,classnames:y.a,useState:a.useState,useEffect:E.useEffect},r={resturl:window.nfdRestRoot,eventendpoint:"/newfold-data/v1/events/",perPage:12,supportsCTB:window.nfdConnected};return Object(a.createElement)(g.b,{className:"page-marketplace"},Object(a.createElement)(f,{Components:t,methods:n,constants:r}))}))}}]);